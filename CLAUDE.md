# CLAUDE.md - Claudeå°‚ç”¨æŒ‡ç¤ºæ›¸

## ğŸ¤– ã‚ãªãŸã¯ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: ç©ºãã‚¹ã‚¿ã‚µãƒ¼ãƒãã‚“
éŸ³æ¥½å›£ä½“å‘ã‘ã®æ–½è¨­äºˆç´„ç©ºãçŠ¶æ³ä¸€å…ƒç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

## âš ï¸ é‡è¦ãªåˆ¶ç´„ã¨ãƒ«ãƒ¼ãƒ«

### çµ¶å¯¾ã«å®ˆã‚‹ã¹ãã“ã¨
1. **æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã®ç·¨é›†ã‚’å„ªå…ˆ** - æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆã¯æœ€å°é™ã«
2. **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆé–‹ç™º** - æ–°æ©Ÿèƒ½å®Ÿè£…æ™‚ã¯å¿…ãšãƒ†ã‚¹ãƒˆã‹ã‚‰æ›¸ã
3. **ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‰ãªã„** - ç‰¹ã«`*.md`ãƒ•ã‚¡ã‚¤ãƒ«ã¯æŒ‡ç¤ºã•ã‚ŒãŸæ™‚ã®ã¿
4. **ã‚³ãƒ¡ãƒ³ãƒˆã¯æœ€å°é™** - ã‚³ãƒ¼ãƒ‰è‡ªä½“ã‚’èª­ã¿ã‚„ã™ãæ›¸ã
5. **ã‚³ãƒŸãƒƒãƒˆå‰ã«å¿…ãš`.github/commit-checklist.md`ã‚’ç¢ºèª** - é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã™ã¹ã¦æ›´æ–°

### ã—ã¦ã¯ã„ã‘ãªã„ã“ã¨
- ãƒ—ãƒ­ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆã—ãªã„
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŒ‡ç¤ºãªã—ã«git pushã—ãªã„
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.envã€local.settings.jsonï¼‰ã‚’ã‚³ãƒŸãƒƒãƒˆã—ãªã„
- console.logã‚’ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã«æ®‹ã•ãªã„
- TypeScriptã§`any`å‹ã‚’ä½¿ã‚ãªã„

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã¨é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«

```
aki-sta/
â”œâ”€â”€ functions/          # Azure Functions API
â”‚   â”œâ”€â”€ index.js       # âš ï¸ å¿…é ˆï¼šã“ã‚ŒãŒãªã„ã¨èµ·å‹•ã‚¨ãƒ©ãƒ¼
â”‚   â””â”€â”€ availability-api/
â”œâ”€â”€ frontend/          # React TypeScript
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ components/  # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”œâ”€â”€ services/    # APIé€šä¿¡
â”‚       â””â”€â”€ types/       # å‹å®šç¾©
â””â”€â”€ CLAUDE.md          # ã“ã®æŒ‡ç¤ºæ›¸
```

## ğŸš€ ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰ï¼ˆã‚³ãƒ”ãƒšç”¨ï¼‰

### ä¸¡æ–¹èµ·å‹•ã™ã‚‹å ´åˆ
```bash
# Terminal 1
cd functions && npm start

# Terminal 2  
cd frontend && npm start
```

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
# Backend
cd functions && npm test

# Frontend
cd frontend && npm test -- --coverage --watchAll=false
```

### ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
```bash
# ãƒãƒ¼ãƒˆä½¿ç”¨çŠ¶æ³
lsof -i :3000  # React
lsof -i :7071  # Azure Functions

# ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰bashç¢ºèª
# Claudeã‚³ãƒãƒ³ãƒ‰: /bashes
```

## ğŸ› æ—¢çŸ¥ã®å•é¡Œã¨è§£æ±ºç­–

### Azure Functionsèµ·å‹•ã‚¨ãƒ©ãƒ¼
**åŸå› **: functions/index.jsãŒå­˜åœ¨ã—ãªã„
**è§£æ±º**: 
```bash
echo "module.exports = require('./availability-api/index');" > functions/index.js
```

### Jest + axios ESMã‚¨ãƒ©ãƒ¼
**åŸå› **: axiosã®ESãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å•é¡Œ
**è§£æ±º**: setupTests.tsã§ãƒ¢ãƒƒã‚¯ã€package.jsonã§transformIgnorePatternsè¨­å®š

### React Hook act()è­¦å‘Š
**åŸå› **: éåŒæœŸå‡¦ç†ãŒé©åˆ‡ã«ãƒ©ãƒƒãƒ—ã•ã‚Œã¦ã„ãªã„
**è§£æ±º**:
```tsx
await act(async () => {
  render(<Component />);
});
```

## ğŸ’¡ ä½œæ¥­æ™‚ã®åˆ¤æ–­åŸºæº–

### æ–°æ©Ÿèƒ½è¿½åŠ æ™‚ã®ãƒ•ãƒ­ãƒ¼
1. ã¾ãšãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼ˆ`.test.ts`/`.test.tsx`ï¼‰
2. ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆREDï¼‰
3. æœ€å°é™ã®ã‚³ãƒ¼ãƒ‰ã§æˆåŠŸã•ã›ã‚‹ï¼ˆGREENï¼‰
4. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆREFACTORï¼‰
5. ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèªï¼ˆç›®æ¨™: 80%ä»¥ä¸Šï¼‰

### ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã®å„ªå…ˆé †ä½
1. æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã®ç·¨é›† > æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
2. å¿…è¦æœ€å°é™ã®å¤‰æ›´ > å¤§è¦æ¨¡ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
3. å‹å®‰å…¨æ€§ã®ç¢ºä¿ > å®Ÿè£…ã‚¹ãƒ”ãƒ¼ãƒ‰

### APIå¤‰æ›´æ™‚ã®å¯¾å¿œ
1. functions/availability-api/index.js ã‚’æ›´æ–°
2. frontend/src/types/availability.ts ã®å‹ã‚’æ›´æ–°
3. ä¸¡æ–¹ã®ãƒ†ã‚¹ãƒˆã‚’æ›´æ–°ãƒ»å®Ÿè¡Œ
4. çµ±åˆå‹•ä½œç¢ºèª

## ğŸ“Š ç¾åœ¨ã®çŠ¶æ…‹ï¼ˆè‡ªå‹•æ›´æ–°å¯¾è±¡ï¼‰

### MVP v1.0 - âœ… å®Œäº†
- Backend API: 100% ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
- Frontend: 73% ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
- çµ±åˆãƒ†ã‚¹ãƒˆ: å‹•ä½œç¢ºèªæ¸ˆã¿

### æ¬¡ã®ä½œæ¥­: MVP v2.0
- å®Ÿãƒ‡ãƒ¼ã‚¿ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å®Ÿè£…
- Puppeteer/Playwrightå°å…¥
- ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ï¼ˆCosmos DBï¼‰

### GitHub Actions
- **main-ci.yml**: push/PRæ™‚ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆï¼ˆå¤‰æ›´éƒ¨åˆ†ã®ã¿ï¼‰
- **full-test.yml**: æ‰‹å‹•/å®šæœŸå®Ÿè¡Œã®å®Œå…¨ãƒ†ã‚¹ãƒˆ
- è©³ç´°: [docs/GITHUB_ACTIONS.md](./docs/GITHUB_ACTIONS.md)

## ğŸ”„ ã‚³ãƒŸãƒƒãƒˆæ™‚ã®è‡ªå‹•ã‚¿ã‚¹ã‚¯

ã‚³ãƒŸãƒƒãƒˆä½œæˆæ™‚ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š
1. `git status`ã§å¤‰æ›´ç¢ºèª
2. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œç¢ºèª
3. CLAUDE.mdæ›´æ–°ï¼ˆç¾åœ¨ã®çŠ¶æ…‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
4. README.mdæ›´æ–°ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
5. ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¤‰æ›´å†…å®¹ã‚’æ˜ç¢ºã«è¨˜è¼‰

## ğŸ¯ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®ã‚„ã‚Šå–ã‚Šã§é‡è¦ãªã“ã¨

### ç¢ºèªã™ã¹ãã“ã¨
- å¤§ããªå¤‰æ›´å‰ã¯å¿…ãšç¢ºèªã‚’å–ã‚‹
- ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤æ™‚ã¯ç‰¹ã«æ…é‡ã«
- å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè¿½åŠ æ™‚ã¯ç†ç”±ã‚’èª¬æ˜

### å ±å‘Šã™ã¹ãã“ã¨
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®å¤‰åŒ–
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ‡¸å¿µ

### ææ¡ˆã™ã¹ãã“ã¨
- ã‚ˆã‚Šè‰¯ã„å®Ÿè£…æ–¹æ³•ãŒã‚ã‚‹å ´åˆ
- ãƒ†ã‚¹ãƒˆãŒä¸è¶³ã—ã¦ã„ã‚‹å ´åˆ
- å‹å®‰å…¨æ€§ãŒæãªã‚ã‚Œã¦ã„ã‚‹å ´åˆ

## ğŸ”¥ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Azure Functionsèµ·å‹•ã‚¨ãƒ©ãƒ¼
```bash
# "Worker was unable to load entry point 'index.js'"ã®å ´åˆ
cd functions
echo "module.exports = require('./availability-api/index');" > index.js
```

### GitHub Actionsçµ±åˆãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼
- "Select a number for worker runtime"ã§æ­¢ã¾ã‚‹å ´åˆ
- â†’ ç’°å¢ƒå¤‰æ•°`FUNCTIONS_WORKER_RUNTIME=node`ã‚’è¨­å®šæ¸ˆã¿ï¼ˆmain-ci.ymlï¼‰
- è©³ç´°: [docs/GITHUB_ACTIONS.md](./docs/GITHUB_ACTIONS.md)

---
*æœ€çµ‚æ›´æ–°: 2025-08-20 - Claudeå‘ã‘æŒ‡ç¤ºæ›¸ã¨ã—ã¦æœ€é©åŒ–*